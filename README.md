# Horizon

Horizon is a structured document language compiler that converts `.nh` files into PDF documents. Built with Bison and Flex, Horizon provides a simple, hierarchical syntax for creating well-formatted documents with support for titles, headings, paragraphs, bullet points, and inline formatting.

## Features

- Structured document syntax with hierarchical organization
- PDF generation with automatic formatting
- Support for titles, headings, subheadings, paragraphs, and bullet points
- Inline text formatting (bold, italic)
- Automatic word wrapping and page breaks
- Centered title rendering
- Clean, deterministic parsing using LR parser

## Requirements

- C++ compiler with C++17 support (g++ or clang++)
- Bison (GNU parser generator)
- Flex (fast lexical analyzer)
- libhpdf (Haru PDF library)
- Make

### Installing Dependencies

On macOS with Homebrew:
```bash
brew install bison flex libharu
```

On Ubuntu/Debian:
```bash
sudo apt-get install bison flex libhpdf-dev build-essential
```

## Building

Clone the repository and build the project:

```bash
make
```

This will generate the `horizon` executable in the project root.

## Usage

Compile a `.nh` file to PDF:

```bash
./horizon document.nh
```

This will generate `document.pdf` in the current directory.

### Example

Create a file `example.nh`:

```
@title ( My Document Title )

@heading ( Introduction ) {
    This is a paragraph with some text.
    
    @subheading ( Details ) {
        More information here.
        
        @bullet { First bullet point }
        @bullet { Second bullet point }
        
        This paragraph contains @bold { bold text } and @italic { italic text }.
    }
}
```

Compile it:

```bash
./horizon example.nh
```

This generates `example.pdf`.

## Language Syntax

### Document Structure

- `@title ( text )` - Document title (centered, large font)
- `@heading ( text ) { ... }` - Major section heading
- `@subheading ( text ) { ... }` - Subsection heading
- `@bullet { text }` - Bullet point
- Plain text - Regular paragraph content

### Inline Formatting

- `@bold { text }` - Bold text
- `@italic { text }` - Italic text

### Syntax Rules

- Headings and subheadings use parentheses `()` for the title and braces `{}` for content
- Bullets use braces `{}` for content
- Inline formatting uses braces `{}` for the formatted text
- Multiple paragraphs are separated by blank lines
- Text inside parentheses and braces can span multiple lines

## Project Structure

```
horizon/
├── src/
│   ├── main.cpp          # Main program entry point
│   ├── parser.y          # Bison grammar definition
│   ├── scanner.l         # Flex lexer definition
│   ├── ast.h             # AST node definitions
│   ├── ast.cpp           # AST implementation
│   ├── pdf_renderer.h    # PDF rendering interface
│   ├── pdf_renderer.cpp  # PDF rendering implementation
│   └── token.h           # Token definitions
├── tests/
│   └── test.nh           # Example document
├── Makefile              # Build configuration
└── README.md             # This file
```

## How It Works

1. **Lexical Analysis**: Flex scans the input file and generates tokens
2. **Parsing**: Bison parses the token stream according to the grammar rules
3. **AST Construction**: The parser builds an Abstract Syntax Tree representing the document structure
4. **PDF Generation**: The AST is traversed and rendered to PDF using libhpdf

## Cleaning

Remove generated files:

```bash
make clean
```

## Generated Files

The following files are automatically generated and should not be edited manually:

- `src/parser.tab.cc`, `src/parser.tab.hh` - Generated from parser.y
- `src/lex.yy.cc` - Generated from scanner.l
- `src/location.hh`, `src/position.hh`, `src/stack.hh` - Generated by Bison
- `src/*.o` - Object files
- `horizon` - Executable

## License

[Add your license here]

## Contributing

[Add contribution guidelines here]
